# üìä –ê–Ω–∞–ª–∏–∑: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ AI SQL Reviewer

## 1Ô∏è‚É£ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### üì¶ –ì–¥–µ —Ö—Ä–∞–Ω–∏—Ç—å –∑–∞–ø–∏—Å–∏?

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: Supabase PostgreSQL (—Ç–∞–±–ª–∏—Ü–∞ `user_query_logs`)**

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã:**

```sql
CREATE TABLE user_query_logs (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
  
  -- –¢–∏–ø –¥–µ–π—Å—Ç–≤–∏—è
  action_type TEXT NOT NULL CHECK (action_type IN (
    'sql_generation',    -- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SQL
    'sql_execution',     -- –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ SQL
    'table_open',        -- –û—Ç–∫—Ä—ã—Ç–∏–µ —Ç–∞–±–ª–∏—Ü—ã
    'data_export',       -- –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
    'schema_load',       -- –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ö–µ–º—ã
    'schema_save',       -- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ö–µ–º—ã
    'schema_delete',     -- –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ö–µ–º—ã
    'connection_establish' -- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
  )),
  
  -- –î–∞–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
  sql_query TEXT,                    -- SQL –∑–∞–ø—Ä–æ—Å (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)
  natural_language_query TEXT,       -- –ò—Å—Ö–æ–¥–Ω—ã–π –∑–∞–ø—Ä–æ—Å –Ω–∞ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–º —è–∑—ã–∫–µ
  schema_used JSONB,                 -- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω–∞—è —Å—Ö–µ–º–∞ –ë–î (JSON)
  dialect TEXT,                      -- –¢–∏–ø –ë–î (postgres, mysql, etc)
  
  -- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã (–¥–ª—è SQL execution)
  rows_returned INTEGER,             -- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫
  execution_time_ms INTEGER,         -- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
  success BOOLEAN DEFAULT true,      -- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏
  error_message TEXT,                -- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ (–µ—Å–ª–∏ –µ—Å—Ç—å)
  
  -- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
  tokens_used INTEGER,               -- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)
  file_info JSONB,                   -- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∞–π–ª–µ (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)
  export_format TEXT,                -- –§–æ—Ä–º–∞—Ç —ç–∫—Å–ø–æ—Ä—Ç–∞ (CSV, Excel, etc)
  
  -- –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏
  created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
  
  -- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
  CONSTRAINT user_action_index UNIQUE NULLS NOT DISTINCT (user_id, action_type, created_at)
);

-- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
CREATE INDEX idx_user_query_logs_user_id ON user_query_logs(user_id);
CREATE INDEX idx_user_query_logs_action_type ON user_query_logs(action_type);
CREATE INDEX idx_user_query_logs_created_at ON user_query_logs(created_at DESC);
CREATE INDEX idx_user_query_logs_user_created ON user_query_logs(user_id, created_at DESC);
CREATE INDEX idx_user_query_logs_sql_gin ON user_query_logs USING gin(to_tsvector('english', sql_query));

-- RLS –ø–æ–ª–∏—Ç–∏–∫–∏
ALTER TABLE user_query_logs ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view their own logs"
  ON user_query_logs FOR SELECT
  USING (auth.uid() = user_id);

CREATE POLICY "System can insert logs"
  ON user_query_logs FOR INSERT
  WITH CHECK (true); -- Edge Functions –∏—Å–ø–æ–ª—å–∑—É—é—Ç service_role
```

### üíæ –û—Ü–µ–Ω–∫–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

**–†–∞–∑–º–µ—Ä –æ–¥–Ω–æ–π –∑–∞–ø–∏—Å–∏ (–ø—Ä–∏–º–µ—Ä–Ω–æ):**
- –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞: ~200 –±–∞–π—Ç
- SQL –∑–∞–ø—Ä–æ—Å (—Å—Ä–µ–¥–Ω–∏–π): ~500-2000 –±–∞–π—Ç
- –°—Ö–µ–º–∞ –ë–î (JSON): ~1-5 KB (–º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª—å—à–µ –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å—Ö–µ–º)
- –ù–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π —è–∑—ã–∫ –∑–∞–ø—Ä–æ—Å: ~100-500 –±–∞–π—Ç

**–ò—Ç–æ–≥–æ –Ω–∞ –∑–∞–ø–∏—Å—å:** ~2-8 KB –≤ —Å—Ä–µ–¥–Ω–µ–º

**–û—Ü–µ–Ω–∫–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∞—Ä–∏—Ñ–æ–≤:**

| –¢–∞—Ä–∏—Ñ | –ó–∞–ø—Ä–æ—Å–æ–≤/–º–µ—Å | –†–∞–∑–º–µ—Ä –ª–æ–≥–æ–≤/–º–µ—Å | –ì–æ–¥ —Ö—Ä–∞–Ω–µ–Ω–∏—è |
|-------|--------------|------------------|--------------|
| Free | ~77 | ~150-600 KB | ~2-7 MB |
| Light | ~1,000 | ~2-8 MB | ~24-96 MB |
| Pro | ~2,000 | ~4-16 MB | ~48-192 MB |

**–ü—Ä–∏ 1000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
- Light (70%): 700 √ó 4 MB = 2.8 GB/–º–µ—Å = 33.6 GB/–≥–æ–¥
- Pro (20%): 200 √ó 8 MB = 1.6 GB/–º–µ—Å = 19.2 GB/–≥–æ–¥
- Free (10%): 100 √ó 0.3 MB = 30 MB/–º–µ—Å = 360 MB/–≥–æ–¥
- **–ò—Ç–æ–≥–æ: ~53 GB/–≥–æ–¥**

### ‚ö° –†–µ—Å—É—Ä—Å—ã –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**1. –ó–∞–ø–∏—Å—å –ª–æ–≥–æ–≤:**
- **Latency:** ~5-20ms –Ω–∞ INSERT
- **Impact:** –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–ø–∏—Å—å —á–µ—Ä–µ–∑ Edge Functions)
- **Cost:** –ë–µ—Å–ø–ª–∞—Ç–Ω–æ –≤ —Ä–∞–º–∫–∞—Ö Supabase (PostgreSQL –≤–∫–ª—é—á–µ–Ω)

**2. –ß—Ç–µ–Ω–∏–µ –ª–æ–≥–æ–≤:**
- **–ó–∞–ø—Ä–æ—Å —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏:** ~10-50ms (—Å –∏–Ω–¥–µ–∫—Å–∞–º–∏)
- **–ü–∞–≥–∏–Ω–∞—Ü–∏—è:** –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ (LIMIT 50-100 –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É)
- **Cost:** –ë–µ—Å–ø–ª–∞—Ç–Ω–æ (–≤ —Ä–∞–º–∫–∞—Ö –ª–∏–º–∏—Ç–æ–≤ Supabase)

**3. –ü–æ–∏—Å–∫ –ø–æ –ª–æ–≥–∞–º:**
- **Full-text search:** ~50-200ms (—Å GIN –∏–Ω–¥–µ–∫—Å–æ–º)
- **–ü–æ –¥–∞—Ç–µ/—Ç–∏–ø—É:** ~10-30ms (—Å –æ–±—ã—á–Ω—ã–º–∏ –∏–Ω–¥–µ–∫—Å–∞–º–∏)
- **Cost:** –ë–µ—Å–ø–ª–∞—Ç–Ω–æ

**4. –•—Ä–∞–Ω–µ–Ω–∏–µ:**
- Supabase Free: 500 MB (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è ~100 –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
- Supabase Pro: 8 GB (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è ~1000-2000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
- **Cost:** –í–∫–ª—é—á–µ–Ω–æ –≤ –ø–æ–¥–ø–∏—Å–∫—É Supabase

### üóëÔ∏è –ü–æ–ª–∏—Ç–∏–∫–∞ –æ—á–∏—Å—Ç–∫–∏ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ö—Ä–∞–Ω–µ–Ω–∏—é:**

| –¢–∞—Ä–∏—Ñ | –ü–µ—Ä–∏–æ–¥ —Ö—Ä–∞–Ω–µ–Ω–∏—è | –ü—Ä–∏—á–∏–Ω–∞ |
|-------|-----------------|---------|
| Free | 7 –¥–Ω–µ–π | –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–ª—è –¥–µ–º–æ |
| Light | 30 –¥–Ω–µ–π (1 –º–µ—Å—è—Ü) | –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ |
| Pro | 90 –¥–Ω–µ–π (3 –º–µ—Å—è—Ü–∞) | –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –¥–ª—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–æ–≤ |

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞:**
```sql
-- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –∑–∞–¥–∞—á–∞ (pg_cron –∏–ª–∏ –≤–Ω–µ—à–Ω–∏–π —Å–∫—Ä–∏–ø—Ç)
DELETE FROM user_query_logs 
WHERE created_at < NOW() - INTERVAL '30 days'
  AND user_id IN (
    SELECT id FROM auth.users 
    WHERE id IN (
      SELECT DISTINCT user_id FROM subscriptions 
      WHERE plan = 'light' AND status = 'active'
    )
  );
```

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:** –•—Ä–∞–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ, –∞ –±–æ–ª—å—à–∏–µ –¥–∞–Ω–Ω—ã–µ (SQL, —Å—Ö–µ–º—ã) –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤ Supabase Storage –∏ —É–¥–∞–ª—è—Ç—å –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã –ø–æ—Å–ª–µ 7 –¥–Ω–µ–π.

### üí∞ –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏ –∑–∞—Ç—Ä–∞—Ç—ã

**–ó–∞—Ç—Ä–∞—Ç—ã:**
- –•—Ä–∞–Ω–µ–Ω–∏–µ: **$0** (–≤—Ö–æ–¥–∏—Ç –≤ Supabase –ø–æ–¥–ø–∏—Å–∫—É –¥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –ª–∏–º–∏—Ç–∞)
- –ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å: **$0** (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Ç—Ä–∞—Ñ–∏–∫)
- –ò–Ω–¥–µ–∫—Å—ã: –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –¥–ª—è –±–∏–∑–Ω–µ—Å–∞:**
1. **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –Ω–∞–π—Ç–∏ –∏—Å—Ç–æ—á–Ω–∏–∫ –æ—à–∏–±–æ–∫
2. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è** ‚Äî –ø–æ–Ω–∏–º–∞–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
3. **–£–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞** ‚Äî –∞–Ω–∞–ª–∏–∑ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
4. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞** ‚Äî –±—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è:**
- –ú–æ–∂–µ—Ç –±—ã—Ç—å **—Ñ–∏—á–µ–π Pro –ø–ª–∞–Ω–∞** (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–≥–æ–≤)
- –ú–æ—Ç–∏–≤–∞—Ü–∏—è –¥–ª—è –∞–ø–≥—Ä–µ–π–¥–∞: "Pro: 90 –¥–Ω–µ–π –∏—Å—Ç–æ—Ä–∏–∏ vs Light: 30 –¥–Ω–µ–π"

---

## 2Ô∏è‚É£ AI SQL Reviewer

### üì¶ –ì–¥–µ —Ö—Ä–∞–Ω–∏—Ç—å –∑–∞–ø–∏—Å–∏?

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: Supabase PostgreSQL (—Ç–∞–±–ª–∏—Ü–∞ `sql_reviews`)**

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã:**

```sql
CREATE TABLE sql_reviews (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
  
  -- –°–≤—è–∑—å —Å –ª–æ–≥–æ–º –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  query_log_id UUID REFERENCES user_query_logs(id) ON DELETE SET NULL,
  
  -- –ò—Å—Ö–æ–¥–Ω—ã–π SQL
  original_sql TEXT NOT NULL,
  schema_used JSONB,                 -- –°—Ö–µ–º–∞ –ë–î –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
  dialect TEXT DEFAULT 'postgres',
  
  -- –†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–µ–≤—å—é
  review_result JSONB NOT NULL,      -- –ü–æ–ª–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–µ–≤—å—é (JSON)
  /*
  –°—Ç—Ä—É–∫—Ç—É—Ä–∞ review_result:
  {
    "overall_score": 8.5,            // 0-10
    "issues": [
      {
        "type": "logic_error",
        "severity": "high",
        "message": "...",
        "suggestion": "..."
      }
    ],
    "business_metrics": {
      "warnings": ["..."],
      "recommendations": ["..."]
    },
    "performance_tips": ["..."],
    "optimization_suggestions": ["..."]
  }
  */
  
  -- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
  tokens_used INTEGER NOT NULL,      -- –¢–æ–∫–µ–Ω—ã –Ω–∞ —Ä–µ–≤—å—é
  review_time_ms INTEGER,            -- –í—Ä–µ–º—è —Ä–µ–≤—å—é –≤ –º—Å
  
  -- –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏
  created_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
);

-- –ò–Ω–¥–µ–∫—Å—ã
CREATE INDEX idx_sql_reviews_user_id ON sql_reviews(user_id);
CREATE INDEX idx_sql_reviews_created_at ON sql_reviews(created_at DESC);
CREATE INDEX idx_sql_reviews_user_created ON sql_reviews(user_id, created_at DESC);

-- RLS –ø–æ–ª–∏—Ç–∏–∫–∏
ALTER TABLE sql_reviews ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view their own reviews"
  ON sql_reviews FOR SELECT
  USING (auth.uid() = user_id);
```

### üíæ –û—Ü–µ–Ω–∫–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

**–†–∞–∑–º–µ—Ä –æ–¥–Ω–æ–π –∑–∞–ø–∏—Å–∏ —Ä–µ–≤—å—é:**
- –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞: ~300 –±–∞–π—Ç
- original_sql: ~500-2000 –±–∞–π—Ç
- review_result (JSON): ~2-5 KB (–¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑)
- schema_used: ~1-5 KB

**–ò—Ç–æ–≥–æ –Ω–∞ –∑–∞–ø–∏—Å—å:** ~4-10 KB –≤ —Å—Ä–µ–¥–Ω–µ–º

**–û—Ü–µ–Ω–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
- **Light –ø–ª–∞–Ω:** ~100-200 —Ä–µ–≤—å—é/–º–µ—Å = ~0.4-2 MB/–º–µ—Å = ~5-24 MB/–≥–æ–¥
- **Pro –ø–ª–∞–Ω:** ~300-500 —Ä–µ–≤—å—é/–º–µ—Å = ~1.2-5 MB/–º–µ—Å = ~15-60 MB/–≥–æ–¥

**–ü—Ä–∏ 1000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
- Light (70%): 700 √ó 1 MB = 700 MB/–º–µ—Å = 8.4 GB/–≥–æ–¥
- Pro (20%): 200 √ó 2.5 MB = 500 MB/–º–µ—Å = 6 GB/–≥–æ–¥
- **–ò—Ç–æ–≥–æ: ~14.4 GB/–≥–æ–¥**

### ‚ö° –†–µ—Å—É—Ä—Å—ã –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**1. –í—ã–∑–æ–≤ AI –¥–ª—è —Ä–µ–≤—å—é:**
- **Latency:** ~3-10 —Å–µ–∫—É–Ω–¥ (AI –∞–Ω–∞–ª–∏–∑)
- **Cost:** ~$0.001-0.003 –∑–∞ —Ä–µ–≤—å—é (1,500-3,000 —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–∏ $0.25/1M —Ç–æ–∫–µ–Ω–æ–≤)
- **Impact:** –û—Ç–¥–µ–ª—å–Ω—ã–π –≤—ã–∑–æ–≤ AI API

**2. –•—Ä–∞–Ω–µ–Ω–∏–µ:**
- –†–∞–∑–º–µ—Ä –ë–î: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π (~4-10 KB –Ω–∞ –∑–∞–ø–∏—Å—å)
- Cost: **$0** (–≤ —Ä–∞–º–∫–∞—Ö Supabase)

**3. –ß—Ç–µ–Ω–∏–µ:**
- –ó–∞–ø—Ä–æ—Å —Ä–µ–≤—å—é: ~10-30ms (—Å –∏–Ω–¥–µ–∫—Å–∞–º–∏)
- Cost: **$0**

### üí∞ –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏ –∑–∞—Ç—Ä–∞—Ç—ã

**–ó–∞—Ç—Ä–∞—Ç—ã –Ω–∞ —Ä–µ–≤—å—é:**

| –¢–∞—Ä–∏—Ñ | –†–µ–≤—å—é/–º–µ—Å | –°—Ç–æ–∏–º–æ—Å—Ç—å —Ç–æ–∫–µ–Ω–æ–≤/–º–µ—Å | –í–∫–ª—é—á–µ–Ω–æ –≤ —Ç–∞—Ä–∏—Ñ? |
|-------|-----------|----------------------|-------------------|
| Free | 0 | $0 | ‚ùå –ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ |
| Light | ~100 | ~$0.15-0.30 | ‚úÖ –î–∞ (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ) |
| Pro | ~300 | ~$0.45-0.90 | ‚úÖ –î–∞ (–±–µ–∑–ª–∏–º–∏—Ç–Ω–æ) |

**–õ–∏–º–∏—Ç—ã –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏:**
- **Light:** 50 —Ä–µ–≤—å—é/–º–µ—Å (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ)
- **Pro:** –ë–µ–∑–ª–∏–º–∏—Ç–Ω—ã–µ —Ä–µ–≤—å—é
- **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–≤—å—é:** $0.01 –∑–∞ —Ä–µ–≤—å—é (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è:**
- **Premium —Ñ–∏—á–∞** ‚Äî –º–æ—Ç–∏–≤–∞—Ü–∏—è –¥–ª—è –∞–ø–≥—Ä–µ–π–¥–∞ –Ω–∞ Pro
- **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–≤—å—é** ‚Äî –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–æ—Ö–æ–¥–∞
- **–¶–µ–Ω–Ω–æ—Å—Ç—å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
  - –≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ –∑–∞–ø—Ä–æ—Å–æ–≤
  - –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –æ—à–∏–±–æ–∫
  - –û–±—É—á–µ–Ω–∏–µ SQL

**ROI –∞–Ω–∞–ª–∏–∑–∞:**
- **Light:** $15/–º–µ—Å - $0.25 (—Ç–æ–∫–µ–Ω—ã) - $0.20 (—Ä–µ–≤—å—é) = **$14.55 –ø—Ä–∏–±—ã–ª—å/–º–µ—Å**
- **Pro:** $30/–º–µ—Å - $0.625 (—Ç–æ–∫–µ–Ω—ã) - $0.675 (—Ä–µ–≤—å—é) = **$28.70 –ø—Ä–∏–±—ã–ª—å/–º–µ—Å**

**–ú–∞—Ä–∂–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –≤—ã—Å–æ–∫–æ–π (95%+) –¥–∞–∂–µ —Å —É—á–µ—Ç–æ–º —Ä–µ–≤—å—é!**

### üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π —Ç–æ–∫–µ–Ω–æ–≤

**–í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**

**–í–∞—Ä–∏–∞–Ω—Ç 1: –†–µ–≤—å—é –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç —Ç–æ–∫–µ–Ω—ã (–ø—Ä–æ—â–µ)**
- –ö–∞–∂–¥–æ–µ —Ä–µ–≤—å—é = ~1,500-3,000 —Ç–æ–∫–µ–Ω–æ–≤
- –£—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –≤ –æ–±—â–µ–º –ª–∏–º–∏—Ç–µ —Ç–æ–∫–µ–Ω–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- ‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç "–ø–æ—Ç—Ä–∞—Ç–∏—Ç—å" —Ç–æ–∫–µ–Ω—ã –Ω–∞ —Ä–µ–≤—å—é –≤–º–µ—Å—Ç–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

**–í–∞—Ä–∏–∞–Ω—Ç 2: –û—Ç–¥–µ–ª—å–Ω—ã–π –ª–∏–º–∏—Ç –Ω–∞ —Ä–µ–≤—å—é (–ª—É—á—à–µ)**
- Light: 50 —Ä–µ–≤—å—é/–º–µ—Å (–∏–ª–∏ 100,000 —Ç–æ–∫–µ–Ω–æ–≤ –Ω–∞ —Ä–µ–≤—å—é)
- Pro: –ë–µ–∑–ª–∏–º–∏—Ç–Ω—ã–µ —Ä–µ–≤—å—é
- ‚úÖ –ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–π –ª–∏–º–∏—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ SQL
- ‚úÖ –õ—É—á—à–∏–π UX
- ‚ùå –ù—É–∂–Ω–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø–æ–¥—Å—á–µ—Ç–∞

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –í–∞—Ä–∏–∞–Ω—Ç 2** ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å—á–µ—Ç—á–∏–∫ `review_tokens_used` –≤ —Ç–∞–±–ª–∏—Ü–µ `user_token_usage`

---

## üìä –û–±—â–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### 1. –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ö—Ä–∞–Ω–µ–Ω–∏—è

**–î–ª—è –ª–æ–≥–æ–≤:**
- ‚úÖ –•—Ä–∞–Ω–∏—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (—Ç–∏–ø –¥–µ–π—Å—Ç–≤–∏—è, –≤—Ä–µ–º—è, —Ä–µ–∑—É–ª—å—Ç–∞—Ç) –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ
- ‚úÖ –ë–æ–ª—å—à–∏–µ –¥–∞–Ω–Ω—ã–µ (SQL > 10KB, —Å—Ö–µ–º—ã > 50KB) —Ö—Ä–∞–Ω–∏—Ç—å –≤ Supabase Storage
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —á–µ—Ä–µ–∑ 30-90 –¥–Ω–µ–π (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∞—Ä–∏—Ñ–∞)
- ‚úÖ –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤ –≤ Storage (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–î–ª—è —Ä–µ–≤—å—é:**
- ‚úÖ –•—Ä–∞–Ω–∏—Ç—å –≤—Å–µ –≤ PostgreSQL (—Ä–∞–∑–º–µ—Ä –Ω–µ–±–æ–ª—å—à–æ–π)
- ‚úÖ –û—á–∏—Å—Ç–∫–∞ —á–µ—Ä–µ–∑ 90-180 –¥–Ω–µ–π (–º–æ–∂–Ω–æ –¥–æ–ª—å—à–µ –¥–ª—è Pro)
- ‚úÖ –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –∞—Ä—Ö–∏–≤–∞—Ü–∏—è –≤ Storage –ø–æ—Å–ª–µ 1 –≥–æ–¥–∞

### 2. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- ‚úÖ –ü–∞–≥–∏–Ω–∞—Ü–∏—è –≤–µ–∑–¥–µ (LIMIT 50-100)
- ‚úÖ –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ user_id + created_at
- ‚úÖ GIN –∏–Ω–¥–µ–∫—Å –¥–ª—è full-text search –ø–æ SQL
- ‚úÖ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–ø–∏—Å—å –ª–æ–≥–æ–≤ (–Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫)

### 3. –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ü—Ä–∏ —Ä–æ—Å—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
- **< 1000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:** –¢–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ (PostgreSQL)
- **1000-10000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:** 
  - –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –ø–æ –¥–∞—Ç–∞–º
  - –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **> 10000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
  - –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –≤–Ω–µ—à–Ω–µ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (S3) –¥–ª—è –∞—Ä—Ö–∏–≤–æ–≤
  - TimescaleDB –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—è–¥–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### 4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

**–ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:**
- –†–∞–∑–º–µ—Ä —Ç–∞–±–ª–∏—Ü –ª–æ–≥–æ–≤ –∏ —Ä–µ–≤—å—é
- –°–∫–æ—Ä–æ—Å—Ç—å –∑–∞–ø–∏—Å–∏/—á—Ç–µ–Ω–∏—è
- –ü–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–π (—Å–∫–æ–ª—å–∫–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ä–µ–≤—å—é)
- –°—Ç–æ–∏–º–æ—Å—Ç—å —Ç–æ–∫–µ–Ω–æ–≤ –Ω–∞ —Ä–µ–≤—å—é

---

## ‚úÖ –ò—Ç–æ–≥–æ–≤—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –•—Ä–∞–Ω–∏—Ç—å 30-90 –¥–Ω–µ–π (–ø–æ —Ç–∞—Ä–∏—Ñ–∞–º)
- ‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω–æ –¥–ª—è Free (7 –¥–Ω–µ–π), –≤–∫–ª—é—á–µ–Ω–æ –¥–ª—è Light/Pro
- ‚úÖ Cost: **$0** (–≤ —Ä–∞–º–∫–∞—Ö Supabase)

**AI SQL Reviewer:**
- ‚úÖ –ü–ª–∞—Ç–Ω–∞—è —Ñ–∏—á–∞ (Light/Pro —Ç–æ–ª—å–∫–æ)
- ‚úÖ Light: 50 —Ä–µ–≤—å—é/–º–µ—Å, Pro: –±–µ–∑–ª–∏–º–∏—Ç
- ‚úÖ Cost: ~$0.15-0.90/–º–µ—Å –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –ú–∞—Ä–∂–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –≤—ã—Å–æ–∫–æ–π (95%+)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**
1. **–í—ã—Å–æ–∫–∏–π:** –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å, –±–µ—Å–ø–ª–∞—Ç–Ω–æ)
2. **–°—Ä–µ–¥–Ω–∏–π:** AI SQL Reviewer (–ø—Ä–µ–º–∏—É–º —Ñ–∏—á–∞, —Ç—Ä–µ–±—É–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

